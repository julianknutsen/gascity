env GC_BEADS=file
env GC_DOLT=skip

exec gc init $WORK/bright-lights
cd $WORK/bright-lights

exec gc agent add --name worker
stdout 'Added agent'
stdout 'worker'

exec gc agent list
stdout 'bright-lights:'
stdout 'mayor'
stdout 'worker'

# Hook a bead to an agent.
exec gc bead create "Print hello"
exec gc agent hook worker gc-1
stdout 'Hooked bead'
stdout 'worker'

exec gc bead show gc-1
stdout 'hooked'
stdout 'worker'

# Query hooked bead by agent name.
exec gc bead hooked worker
stdout 'gc-1'
stdout 'hooked'
stdout 'worker'
