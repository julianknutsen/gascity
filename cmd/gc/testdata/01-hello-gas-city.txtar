# Tutorial 01 â€” Hello, Gas City

env GC_BEADS=file
env GC_DOLT=skip

# Initialize a city
exec gc init $WORK/bright-lights
stdout 'Welcome to Gas City!'
stdout 'Initialized city'
stdout 'bright-lights'

# Verify city structure
exists $WORK/bright-lights/.gc
exists $WORK/bright-lights/city.toml

cd $WORK/bright-lights

# Add the rig (walks up from hello-world to find .gc/)
cd $WORK/bright-lights/hello-world
exec gc rig add .
stdout 'Adding rig'
stdout 'hello-world'
stdout 'Detected git repo'
stdout 'Rig added'

cd $WORK/bright-lights

# List rigs
exec gc rig list
stdout 'Rigs in'
stdout 'bright-lights \(HQ\):'
stdout 'hello-world:'

# Create a bead (from inside the rig directory, using bd directly)
cd $WORK/bright-lights/hello-world
exec bd create 'Create a script that prints hello world'
stdout 'Created bead: gc-1'

# List ready beads
exec bd ready
stdout 'gc-1'
stdout 'Create a script that prints hello world'

# Show a bead
exec bd show gc-1
stdout 'gc-1'
stdout 'open'

# Close a bead
exec bd close gc-1
stdout 'Closed bead: gc-1'

# Verify closed bead shows closed status
exec bd show gc-1
stdout 'closed'

# Closed beads don't appear in ready
exec bd ready
! stdout 'gc-1'

# List all beads (closed beads still appear)
exec bd list
stdout 'gc-1'
stdout 'closed'
stdout 'Create a script that prints hello world'

cd $WORK/bright-lights

# Attach to an agent
# exec gc agent attach mayor

# Start the city (already initialized)
exec gc start
stdout 'City started.'

# Stop the city
exec gc stop
stdout 'City stopped.'

-- bright-lights/hello-world/.git/config --
[core]
	bare = false
