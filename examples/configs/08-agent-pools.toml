# Tutorial 08 â€” Agent Pools
#
# Mayor is fixed (always-on, implicit pool: min=1, max=1).
# Workers scale elastically based on bead queue depth.
# check returns desired count, clamped to [min, max].
# Pool workers poll bd ready, claim work, and exit when
# the queue is empty.

[workspace]
name = "my-city"
provider = "claude"

[formulas]
dir = ".gc/formulas"

# Fixed agent (implicit pool: min=1, max=1, check="echo 1")
[[agents]]
name = "mayor"
prompt_template = "prompts/mayor.md"

# Elastic pool (max>1 -> gets -1, -2, ... suffixes)
[[agents]]
name = "worker"
prompt_template = "prompts/pool-worker.md"

[agents.pool]
min = 0
max = 5
check = "bd ready --unassigned --limit 0 --json | jq length"

[beads]
provider = "bd"
