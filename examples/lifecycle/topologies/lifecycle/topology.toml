# Lifecycle — polecat pool + refinery singleton.
#
# Each polecat creates its own worktree, makes a feature branch, commits,
# and hands off to the refinery which merges to main. Both use bash scripts
# for deterministic demo recordings.
#
# All agents are rig-scoped (no city agents).

[topology]
name = "lifecycle"
schema = 1
city_agents = []

# ── POLECAT — branch-based workers. Pool of 5. Self-managed worktree. ─
[[agents]]
name = "polecat"
prompt_template = "prompts/polecat.md.tmpl"
start_command = "{{.ConfigDir}}/scripts/mock-polecat.sh"
nudge = "Find work, create a branch, implement, push, hand off to refinery."
idle_timeout = "5m"

[agents.pool]
min = 0
max = 5

# ── REFINERY — merge agent. Singleton. Works in rig dir on main. ──────
[[agents]]
name = "refinery"
prompt_template = "prompts/refinery.md.tmpl"
start_command = "{{.ConfigDir}}/scripts/mock-refinery.sh"
nudge = "Check for merge-ready beads and merge them to main."
idle_timeout = "10m"
