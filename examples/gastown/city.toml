# Gas Town â€” expressed as a Gas City configuration.
#
# This proves the Gas City thesis: any orchestration topology is pure config.
# All 8 Gas Town roles live in topologies/gastown/topology.toml.
# City-scoped agents (mayor, deacon, boot, dog) are declared via city_agents
# in the topology metadata. Rig-scoped agents (witness, refinery, polecat)
# are stamped per-rig when a rig references the same topology.
#
# To use: gc start examples/gastown/
# Requires rigs to be registered: gc rig add <path>

[workspace]
name = "gastown"
provider = "claude"
topology = "topologies/gastown"

[daemon]
patrol_interval = "30s"
max_restarts = 5
restart_window = "1h"
shutdown_timeout = "5s"

# Register a rig to activate per-rig agents (witness, refinery, polecat):
# [[rigs]]
# name = "myproject"
# path = "/path/to/your/project"
# topology = "topologies/gastown"

# Crew members are individually named, so they can't be topology-stamped:
# [[agents]]
# name = "wolf"
# dir = "myproject"
# isolation = "worktree"
# pre_sync = true
# prompt_template = "topologies/gastown/prompts/crew.md.tmpl"
# nudge = "Check your hook and mail, then act accordingly."
# overlay_dir = "topologies/gastown/overlays/crew"
# idle_timeout = "4h"
# session_setup = [
#     "tmux set-option -t {{.Session}} status-right-length 80",
#     "tmux set-option -t {{.Session}} status-interval 5",
#     "tmux set-option -t {{.Session}} status-right '#({{.ConfigDir}}/scripts/status-line.sh {{.Agent}}) %H:%M'",
#     "{{.ConfigDir}}/scripts/bind-key.sh n \"run-shell '{{.ConfigDir}}/scripts/cycle.sh next #{session_name} #{client_tty}'\"",
#     "{{.ConfigDir}}/scripts/bind-key.sh p \"run-shell '{{.ConfigDir}}/scripts/cycle.sh prev #{session_name} #{client_tty}'\"",
#     "{{.ConfigDir}}/scripts/bind-key.sh g \"run-shell '{{.ConfigDir}}/scripts/agent-menu.sh #{client_tty}'\"",
# ]
